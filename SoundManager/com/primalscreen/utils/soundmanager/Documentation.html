
<html>
	<head>
		<title>Primal Screen Actionscript Sound Manager Class Documentation</title>
	</head>

	<style>

		body {
			font-family: Verdana, Helvetica, Arial, sans-serif;
			font-size: 9pt;
		}

		#container {
			width: 700px;
			margin: auto;
			padding-top: 20px;
			padding-bottom: 100px;
		}

		h1 {
			font-size: 18pt;
			color: #205F87;
		}
		h2 {
			font-size: 15pt;
			padding-top: 50px;
			color: #205F87;
		}
		h3 {
			font-size: 12pt;
			padding-top: 40px;
			color: #205F87;
		}

		.important {
			background-color: #F2E4E4;
			border: 1px dashed #BD9191;
			padding: 10px;
			overflow: auto;
			color: #BD4646;
		}

		pre {
			background-color: #E4F1F3;
			border: 1px dashed #91B9BE;
			padding: 10px;
			overflow: auto;
		}
		.fakepre {
			color: #205F87;
			font-family: monospace;
		}
		a {
			color: #205F87;
			text-decoration: none;
		}
		a:hover {
			color: black;
			text-decoration: underline;
		}
		li {
			padding-bottom: 10px;
		}

	</style>


	<body>


<div id="container">
<h1>Primal Screen Sound Manager b0.92 Documentation</h1>


<div class="important">
	<strong>Important:</strong> This version is not backward compatible with previous versions (before b0.7). If you want an old version look 
	<a href="https://github.com/primalscreen/as3/tree/8b14b0820b4dfc74911fc04cb9c4e89f1643f880/SoundManager/com/primalscreen/soundmanager">here.</a>

	<br>
	<br>

	If you want to move up from the old version, it's mostly the same. The three major changes are
	<ul>
		<li>
			SoundManager.getInstance() now has just one argument, and it's an options object that contains all of the options
			that used to be available through multiple arguments.
		</li>
		<li>
			playSound() now has just three arguments. They are <em>source</em> (hasn't changed), <em>this</em> (a reference to the calling class), 
			and	<em>options</em> an object that contains all the options that used to be available through several arguments.
		</li>
		<li>
			The interrupt system is gone, and has been replaced by a priority system, where you give sounds a numerical priority, and they
			will only play if there isn't a sound with a higher priority on the same channel already playing.
		</li>
	</ul>	
</div>


<h2 style="margin-top:-20px;">Installation</h2>
<p>Put the <span class="fakepre">com.primalscreen.soundmanager.SoundManager</span> package and the BulkLoader package 
files in your classpath. Keep the <span class="fakepre">com.primalscreen</span>... and 
<span class="fakepre">br.com.stimuli</span>... folder structures.</p>
<p>If it didn't come with this file, you can get <a href="http://code.google.com/p/bulk-loader/">BulkLoader here</a>.</p>

<p>Then instantiate like this (it's a singleton, you can't just use <span class="fakepre">new SoundManager()</span>):</p>
<pre>
// in the package
import com.primalscreen.soundmanager.utils.SoundManager;

// in the class
var soundManager:com.primalscreen.utils.SoundManager;

// in your constructor
soundManager = SoundManager.getInstance();
</pre>







<h2>Usage</h2>
<h3 style="margin-top:-20px;">SoundManager.getInstance() Options</h3>
<p>
	When you first instanciate SoundManager with the <span class="fakepre">getInstance()</span> function, you can pass it an options object. 
	The available options are:
</p>
<ul>
	<li><strong>verbose</strong> <em>(Const):</em> Change's how much SoundManager traces to the console. Options are 
		<span class="fakepre">SoundManager.SILENT</span>, 
		<span class="fakepre">SoundManager.NORMAL</span>, 
		<span class="fakepre">SoundManager.VERBOSE</span>, and 
		<span class="fakepre">SoundManager.ALL</span>
		 Defaults to <span class="fakepre">SoundManager.NORMAL</span>.</li>
	<li><strong>trace</strong> <em>(String):</em> When in verbose mode, this is what prepends everything that SoundManager traces. Default 
	is <span class="fakepre">"SoundManager: "</span>.</li>
	<li><strong>queueInterval</strong> <em>(Number):</em> While a file is loading, this is the number of milliseconds SoundManager waits before
	checking again to see if the file is ready. Make it higher if you have any performance issues. Default is <span class="fakepre">100</span>.</li>
	<li><strong>samePriorityInterrupts</strong> <em>(Boolean):</em> If true, a second sound playing at the same priority on the same channel
	will interrupt an existing sound. If false, the existing sound will play. Defaults to <span class="fakepre">true</span>.</li>
	
	
</ul>
<p>
	The way to implement these these options is:
</p>
<pre>
soundManager = SoundManager.getInstance({verbose: true, trace:"SoundManager says "});
</pre>


<h3>playSound()</h3>
<p>Now that you have a singleton instance called of SoundManager called soundManager, let's play a sound:</p>
<pre>soundManager.playSound("assets/testaudio.mp3");</pre>
<p>This is the simplest example. It loads the mp3 with bulkloader and plays it when ready. playSound has three arguments. In order they are:</p>

<ul>
	<li><strong>Source</strong> <em>(String/Array):</em> the filename, or array of filenames you want to load 
	and play. You can also put numbers in the array, and the numbers will interpretted as gaps between the sounds, in milliseconds.</li>
	<li><strong>Caller</strong> <em>(Object):</em> Usually <span class="fakepre">this</span>, this reference is used later when you're garbage collecting.
	It's a reference to the class that called the <span class="fakepre">playSound()</span>, so that if you ever want to destroy the app/game/class later, and you want to kill
	all sounds associated with it, you can use the <span class="fakepre">stopSoundsFrom(this)</span> function, to stop all sounds that were set up by <span class="fakepre">this</span> class.</li>
	<li><strong>Options</strong> <em>(Object):</em> Like SoundManager's <span class="fakepre">getInstance()</span> function, <span class="fakepre">playSound()</span>
	 can recieve an options object. See below for the available options.</li>

</ul>

<p><span class="fakepre">playSound()</span> has an options object in it's third parameter, here are the available options.</p>
<ul>
	<li><strong>event</strong> <em>(String):</em> The event you want the SoundManager to dispatch when this 
	sound finishes.</li>
	<li><strong>channel*</strong> <em>(String):</em> The name of the channel you want to play the sound on. *Read more about what a "channel" is, below.
	These aren't real SoundChannels, think of it like if there's a sound playing on channel A, and you play 
	another one on that same channel, it will stop the first sound and play the second. </li>
	<li><strong>priority</strong> <em>(Number):</em> Sets the priority level of the sound. If another sound exists on the same channel,
	the one with the higher priority will play, cutting off the existing sound if necessary.</li>
	<li><strong>eventOnInterrupt</strong> <em>(Boolean):</em> Decides whether the event will fire when a sound is interrupted. Good backup plan for when you're relying on that event to move the application forward, but it's possible to interrupt the sound. Default: false</li>
	<li><strong>dontInterruptSelf</strong> <em>(Boolean):</em> If set to true, when the same sound is requested on the same channel, it will be ignored. Default: false.</li>
	<li><strong>volume</strong> <em>(Number):</em> 0 is muted, 1 is normal volume. Defaults to 1, unless you've already used setVolume();</li>
	<li><strong>loop</strong> <em>(Number):</em> Number of times to loop the sound. 0 is infinite, 1 is default.</li>
	<li><strong>pauseOnTime</strong> <em>(Number):</em> Number of milliseconds to hold the sound out of the queue. It's called "pauseOnTime" because this is used when you want an audio cue to play if a user hovers their mouse over a button.</li>
	<li><strong>pauseOnName</strong> <em>(String):</em> An optional name you can give a pause-on, so you can cancel it later.</li>
</ul>
<p>So a much more complicated example might be:</p>
<pre>
soundManager.playSound("assets/testaudio.mp3", this, {
		event: "TEST_AUDIO_PLAYED", 
		channel: "sound_effects_channel", 
		priority: 4, 
		volume: 0.5,
		loop: 2
	});
</pre>
<p>Which would make the file, <em>testaudio.mp3</em>, load, then play twice at half volume on a channel called "sound_effects_channel", interrupting anything else on that channel with a priority lower than 4. 




<h3>"Channels" in the SoundManager sense</h3>
<p>
	A channel, when it comes to SoundManager, has been a little confusing to some, so here's a brief explanation. <b>A channel can only have one sound 
	playing on it at a time.</b> No matter what. Period. If you're playing a sound on a channel, let's call them sound ALPHA and channel GAMMA, and then 
	try to play another sound, sound BETA on channel GAMMA, one of two things has to happen:
</p>
<ul>
	<li>
		<strong>Sound ALPHA continues to play, sound BETA is ignored.</strong> This happens if ALPHA had a higher priority than BETA, or if any of a couple of the less used "tweak"
		options are used.
	</li>
	<li>
		<strong>Sound ALPHA is stopped and sound BETA plays instead.</strong> This happens if BETA has an equal or higher priority.
	</li>
</ul>
<p>
	The exceptions to these rules come into play when you've set <span class="fakepre">samePriorityInterrupts</span> (in <span class="fakepre">getInstance()</span>) to <span class="fakepre">false</span>, or when it's the exact same sound file, and 
	<span class="fakepre">dontInterruptSelf</span> (in <span class="fakepre">playSound()</span>) is set to <span class="fakepre">true</span>. 
</p>




<h3>Single sounds, sound sequences, and delays in playSound()'s source (first) argument</h3>
<p>The first argument sent to <span class="fakepre">playSound()</span> is very dynamic. The simplest example you've already seen is sending it a 
string, the filename you want to play. If you want to play a sequence of sounds, in order, one after the other,
you can send it an array:</p>
<pre>
playSound(["filename1.mp3", "filename2.mp3", "filename3.mp3"]);
</pre>
<p>Or if you want to build the sequence using some logic of your own, you might want to build the array separately:</p>
<pre>
var seq = new Array();
seq.push("filename1.mp3");
var r = Math.random()*2;
if (r > 1) {seq.push("filename2.mp3");} else {seq.push("filename3.mp3");}
playSound(seq);
</pre>
<p>The above example would play <em>filename1.mp3</em>, then, using <span class="fakepre">Math.random()</span> to generate a random choice, it picks either <em>filename2.mp3</em> or <em>filename3.mp3</em> and play it.</p>
<p>So what if you want a pause between audio files within a sequence. Simple, just put a number in your sequence array, instead of a string.</p>
<pre>
playSound(["filename1.mp3", 500, "filename2.mp3", 500, "filename3.mp3"]);
</pre>
<p>The above example will play the three files in order, but will pause for half a second (500 milliseconds) between them.</p>
<p><b>NOTE</b> that the use of a number for the first item in a sound sequence array is discouraged. We were using this for pause-ons (when a user hovers their mouse over
a button for a while) to define the delay before the pause-on sound played. The problem was that when a sound was already playing on a channel, and you added a sound with
a 5 second "pause-on" gap at the start, it cancelled the old sound long before the new sound would play. It got even more messy if you just brushed over a button and it
cancelled the old sound in order to set up the new pause-on, and that new pause-on was never needed. Instead use <span class="fakepre">pauseOnTime</span>, which holds 
the sound out of the queue for the given period.</p>




<h3>Other SoundManager functions:</h3>
Many of these functions need an id argument to work. That's the id of the sound, and it's return as a Number by the playSound function. If you know 
you'll need to refer back to a sound later, to stop it or change it's volume, do this:
<pre>
var mySound = playSound("filename.mp3");
</pre> 
<ul>
	<li>
		<span class="fakepre">setPath("asset/sounds/");</span><br>
		Sets the location, relative to the document root, of the files you're trying to load. Make sure you leave a 
		<span class="fakepre">/</span> at the end. <b>Be carfeul. This applies to your whole app, because SoundManager is a singleton. So if you're
		collaborating with others on a large app and they're using SoundManager too, don't go changing the path, because it applies to everyone.</b>
	</li>
	<li>
		<span class="fakepre">setVolume(0.8);</span><br>
		Sets the default volume for all <em>new</em> sounds. 0 = mute, 1 = 100%. <b>Again, this is for everything in the app.</b>
	</li>
	<li>
		<span class="fakepre">adjustVolume(id, volume);</span><br>
		Sets the volume of a given sound, by it's ID (which is returned by <span class="fakepre">playSound()</span>, as mentioned above).
	</li>
	<li>
		<span class="fakepre">stopSound(id);</span><br>
		Stops the selected sound by it's ID (which is returned by <span class="fakepre">playSound()</span>, as mentioned above).
	</li>
	<li>
		<span class="fakepre">pauseSound(id);</span><br>
		Pauses the selected sound by it's ID.
	</li>
	<li>
		<span class="fakepre">resumeSound(id);</span><br>
		Resumes the selected sound by it's ID.
	</li>
	<li>
		<span class="fakepre">stopAllSounds();</span><br>
		Stops all sounds. Every single one. Even paused ones.
	</li>
	<li>
		<span class="fakepre">pauseAllSounds();</span><br>
		Pauses all sounds. Every single one. Anywhere in your app.
	</li>
	<li>
		<span class="fakepre">resumeAllSounds();</span><br>
		Resume all sounds. Every single one. 
	</li>
	<li>
		<span class="fakepre">stopChannel("channel_name");</span><br>
		Stops all sounds that are playing on the given channel.
	</li>
	<li>
		<span class="fakepre">pauseChannel("channel_name");</span><br>
		Pauses all sounds that are playing on the given channel.
	</li>
	<li>
		<span class="fakepre">resumeChannel("channel_name");</span><br>
		Resume all sounds that are paused on the given channel.
	</li>

	<li>
		<span class="fakepre">stopSoundsFrom(this);</span><br>
		Stops all sounds that were created by the class/object/movieclip given in the first parameter. There isn't 
		much reason to use anything but <span class="fakepre">this</span> here. When you pass in <span class="fakepre">this</span> 
		as the second parameter for <span class="fakepre">playSound()</span>, SoundManager keeps track of which class originally called 
		the <span class="fakepre">playSound()</span> function. This means that if you call <span class="fakepre">stopSoundsFrom(this)</span> 
		later from the same class, it will stop all sounds called from the class.
	</li>
	<li>
		<span class="fakepre">pauseSoundsFrom(this);</span><br>
		In case you haven't already guessed, this function has similar functionality to 
		<span class="fakepre">stopSoundsFrom(this)</span>, but for pausing. Succinctly, pauses all paused sounds from the same caller.
	</li>
	<li>
		<span class="fakepre">resumeSoundsFrom(this);</span><br>
		Resumes all paused sounds from the same caller.
	</li>
	<li>
		<span class="fakepre">cancelPauseOn("pause_on_name");</span><br>
		Cancels pause-ons that were set up with this name.
	</li>
	<li>
		<span class="fakepre">cancelPauseOnsFrom(this);</span><br>
		Cancels pause-ons that were set up by the same calling class/object/movieclip.
	</li>
	<li>
		<span class="fakepre">cancelAllPauseOns();</span><br>
		Cancels all pause-ons. 
	</li>
	<li>
		<span class="fakepre">muteChannel("channel_name");</span><br>
		Mutes all sounds on the given channel.
	</li>
	<li>
		<span class="fakepre">unmuteChannel("channel_name");</span><br>
		Opposite of <span class="fakepre">muteChannel()</span>.
	</li>
	<li>
		<span class="fakepre">preload("filename", "MY_PRELOAD_EVENT");</span> or<br>
		<span class="fakepre">preload(["filename1", "filename2"], "MY_PRELOAD_EVENT");</span><br>
		Where second argument is a string, the name of the event that SoundManager dispatches when the files are preloaded.
	</li>
</ul>

<h3>Other helpful code snippets:</h3>
<p>Listening for the end of a sound</p>
<pre>
soundManager.playSound("assets/testaudio.mp3", this, {event: "MY_SOUND_PLAYED"});
soundManager.addEventListener("MY_SOUND_PLAYED", soundPlayedHandler);
</pre>
<p>Listening for a file/files to be preloaded</p>
<pre>
soundManager.preload("filename.mp3", "FILENAME_LOADED");
soundManager.addEventListener("FILENAME_LOADED", soundLoadedHandler);
function soundLoadedHandler(e) { /* executed when file is loaded */ }
</pre>
<p>Stopping a specific sound (you have to capture it's returned ID first)</p>
<pre>
var mySoundID = playSound("filename.mp3");
stopSound(mySoundID);
</pre>
<p>Play a few sounds, then when it's time to clean up a class before removeChilding it, stop all sounds that it called.</p>
<pre>
soundManager.playSound("boing.mp3", this);
soundManager.playSound("voiceover.mp3", this, {channel: "vo"});
soundManager.playSound("bang.mp3", this);
soundManager.stopSoundsFrom(this);
</pre>










<h2>License and Credits</h2>
<p>Primal Screen Actionscript Sound Manager Class</p>

<p>The MIT License</p>

<p>Copyright (c) 2010 Primal Screen Inc.</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in
	all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	THE SOFTWARE.</p>

<p>BulkLoader is also MIT Licensed, see it's terms <a href="http://code.google.com/p/bulk-loader/">here</a>.</p>

</div>

	</body>
</html>